function image_loaded(){images_loaded_count++,$(perc_display).text((100/images_total_count*images_loaded_count<<0)+"%"),document.body.onload=function(){setTimeout(function(){$(preloader).hasClass("done")||($(preloader).addClass("done"),$("body").css({overflow:"auto"}))},500)}}function rouletteRoll(a,b){if(void 0!==b.message&&null!==b.message&&void 0!==b.message.err&&b.message.err)return setTimeout(function(){$("#layotWrapper #roulette #loading").css({display:"none"})},500),message(b.message.text,b.message.err),$(".playButton").removeClass("deactivated"),0;setTimeout(function(){$("#layotWrapper #roulette #loading").css({display:"none"})},100);var c=$("#roulette").children("ul"),d=parseInt($("#siteName .balance").text().replace(/([^\d]*)([^\w]*)/g,""));void 0!==b.bonusPayment&&null!==b.bonusPayment?message("Вы играете за счёт своих бонусов",0):b.test_spin||(d-=200,$("#siteName .balance").text(number_format(d,0,"."," ")+" К"));var e=new Audio;e.src="/resource/sound/spinSound.mp3",e.volume=.3;var f=38*$("#layotWrapper #roulette ul li").innerWidth()-$("#layotWrapper #roulette ul li").innerWidth()/2+20+Math.floor(200*Math.random());$(a).children("#hint").css({opacity:"0"});var g=function(){$(c).html(b.rouletteContent),e.play(),c.animate({left:"-="+f},{duration:8500,easing:"easeOutQuart",complete:function(){setTimeout(function(){$(c).html(b.rouletteCommonContent),c.css({left:"calc(50% - 1560px)"}),documentScroll.disableScroll();var a=new Audio;a.src="/resource/sound/winnerBlock.mp3",a.volume=.3,a.play();var e="";if(void 0!==b.promoted&&null!==b.promoted&&b.promoted<296&&(e="<div id='userPromotion'><img src='/resource/images/trippleArrow_up.png' height='70px'><p>ВАС ПОВЫСИЛИ</p><img src='/resource/images/trippleArrow_up.png' height='70px'></div>",$("#siteName #rang").css({"background-position":"-"+b.promoted/5*70+"px"})),$("#winnerBlock").css({display:"block"}),$("#winnerBlock").html(b.PrizeBlock),$(".playButton").removeClass("deactivated"),$("#winnerBlock").append(e),$("#winnerBlock #userPromotion").animate({top:"+=120"},{duration:800,easing:"easeOutBounce"}),!b.test_spin){$("#siteName .balance").text(number_format(d+parseInt(b.weapon.price),0,"."," ")+" К");var f=new FormData;f.append("action","updateData"),f.append("action_type","currBalance"),$.ajax({dataType:"json",type:"POST",url:"/ajax",cache:!1,data:f,processData:!1,contentType:!1,success:function(a){$("#siteName .balance").text(number_format(a.balance_kredits,0,"."," ")+" К")}})}void 0!==b.message&&null!==b.message&&void 0!==b.message.text&&b.message.text&&message(b.message.text,b.message.err)},1),setTimeout(function(){$(a).children("#hint").css({opacity:"1"})},500)}})};document.hasFocus()?g():$(window).on("focus",function(){g(),$(window).off("focus")})}function loteryRoll(a){if(void 0!==a.message&&null!==a.message&&void 0!==a.message.err&&a.message.err)return setTimeout(function(){$("#layotWrapper #bizBlock #biz #loading").css({display:"none"})},500),message(a.message.text,a.message.err),0;setTimeout(function(){$("#layotWrapper #bizBlock #biz #loading").css({display:"none"})},100);var b=$("#layotWrapper #bizBlock #biz").children("ul"),c=parseInt($("#siteName .balance").text().replace(/([^\d]*)([^\w]*)/g,"")),d=new Audio;d.src="/resource/sound/spinSound.mp3",d.volume=.3;var e=function(){$(b).html(a.loteryRouletteData),d.play(),$(b).addClass("start");var e=35*$("#layotWrapper #bizBlock #biz ul li").innerWidth()-$("#layotWrapper #bizBlock #biz ul li").innerWidth()/2+18+Math.floor(52*Math.random());b.animate({left:"-="+e},{duration:8500,easing:"easeOutQuart",complete:function(){setTimeout(function(){$(b).html(""),$(b).removeClass("start"),$(b).css({left:"0"}),documentScroll.disableScroll();var d=new Audio;if(d.src="/resource/sound/winnerBlock.mp3",d.volume=.3,d.autoplay=!0,$("#winnerBlock").css({display:"block"}),$("#winnerBlock").html(a.loteryWinnerBlock),a.isWinner){$("#siteName .balance").text(number_format(c+parseInt(a.bank),0,"."," ")+" К");var e=new FormData;e.append("action","updateData"),e.append("action_type","currBalance"),$.ajax({dataType:"json",type:"POST",url:"/ajax",cache:!1,data:e,processData:!1,contentType:!1,success:function(a){$("#siteName .balance").text(number_format(a.balance_kredits,0,"."," ")+" К")}})}allowLoteryUpdate=!0,loteryUpdateInt=setInterval(loteryDataUpdate,3e3),loteryDataUpdate(),void 0!==a.message&&null!==a.message&&void 0!==a.message.text&&a.message.text&&message(a.message.text,a.message.err)},1)}})};document.hasFocus()?e():$(window).on("focus",function(){e(),$(window).off("focus")})}for(var images=document.images,images_total_count=images.length,images_loaded_count=0,perc_display=$(".preloaderWrapper .percent"),preloader=$(".preloaderWrapper"),i=0;i<images_total_count;i++)image_clone=new Image,image_clone.onload=image_loaded,image_clone.onerror=image_loaded,image_clone.src=images[i].src;0==images_total_count&&(images_total_count++,image_loaded());